<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Excercise</title>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />
</head>
<body>

<script src="js/keys.js"></script>
<script src="js/mapbox-utils.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js'></script>


<div id='map' style='width: 100%; height: 500px;'></div>
<script>
    mapboxgl.accessToken = mapBoxToken;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 1,
        center: [-98.4936, 29.4241]
    });

    // var marker = new mapboxgl.Marker()
    //     .setLngLat([1.407115, 38.89025])
    //     .setPopup(favResturaunt)
    //     .addTo(map);
    //
    // var favResturaunt = new mapboxgl.Popup()
    //     .setHTML("<h1>Sublimotion</h1>");

    // marker.setPopup(favResturaunt);

    var favResturaunts = [{
        resturauntname: 'SubliMotion',
        address:'Ctra. Playa D’en Bossa, s/n, 07817, Balearic Islands, Spain',
        phone: '34 618 89 13 58',
        geo:[1.4030, 38.8834]
    },
        {
            resturauntname: 'Aragawa',
            address:'Japan, 〒105-0003 Tokyo, Minato City, Nishishinbashi, 3 Chome−23−11 御成門小田急ビル',
            phone: '81 3-3438-1867',
            geo:[139.7835, 35.7359]
        },
        {
            resturauntname:'Masa',
            address: '10 Columbus Circle Time Warner Center, 4th Floor New York, NY 10019',
            phone:'01 212 823 9807',
            geo:[-73.9830, 40.7686]
        }];



    function geopin(array) {

        // geocode('Ctra. Playa D’en Bossa, s/n, 07817, Balearic Islands, Spain', mapBoxToken).then(function (value) {
        //     map.jumpTo({center: address})
        // });

        var marker = new mapboxgl.Marker()
            .setLngLat(array.geo)
            .setPopup(favResturaunts)
            .addTo(map);

        var favResturaunts = new mapboxgl.Popup()
            .setHTML(array.resturauntname + '<br>' + array.address + '<br>' + array.phone);

        marker.setPopup(favResturaunts);
    }

    favResturaunts.forEach(geopin);

</script>

</body>
</html>